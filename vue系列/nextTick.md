### nextTick

#### nextTick 的内部机制

nextTick 内部采用了异步任务进行了包装，（多个 nextTick 调用，会被合并成一次，内部会合并回调）最后在异步任务中批处理，它的核心作用是在 Vue 数据更新后，确保获取到更新后的 DOM。

主要的应用场景是 异步更新，Vue 默认会在数据变更时，自动安排一个 nextTick 任务。用户若希望在 Vue 内部的任务执行完毕后，进行某些逻辑操作，就可以将这些操作放入 nextTick 的回调中

#### 内部工作流程

1. 数据变更：当 Vue 组件中的响应式数据发生变更时，Vue 不会立即对 DOM 进行更新。相反，这些变更会被添加到一个队列中
2. 异步队列：在同一个事件循环（Event Loop）中，Vue 将所有的数据变更合并到一个异步队列中。这使得多个 nextTick 调用不会触发多次 DOM 更新，而是合并为一次更新
3. 批处理更新：队列中的 DOM 更新任务将批处理执行。当所有数据变更处理完后，nextTick 的回调才会被调用。此时，你可以安全地访问已更新的 DOM

#### 应用场景

1. 等待 DOM 完成更新后再执行操作
在某些情况下，操作需要基于更新后的 DOM 进行，比如获取 DOM 元素的高度或宽度，进行动画处理，或者在新的 DOM 节点上执行第三方插件。这时，可以将相应的逻辑放到 nextTick 中，确保操作时 DOM 已更新完毕。

2. 防止重复渲染
通过异步队列机制，Vue 会避免重复渲染 DOM，提升性能。因此，在需要等待所有数据变更处理完成之后，再获取最新的 DOM 结构或状态时，可以使用 nextTick