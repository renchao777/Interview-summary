# webpack 相关
**Webpack 是一个前端模块打包和构建工具，把各种资源打包成浏览器可运行文件，并通过 loader、插件、热更新和 Tree Shaking 等功能优化开发和性能**

## webpack 构建流程

1. 初始化配置参数：从配置文件和 shell 语句中读取与合并参数，得出最终的参数

2. 开始编译：用上一步得到得参数初始化一个 Compilter 对象，加载所有的插件和模块规则，并将这些插件注册到 Compiler 对象的生命周期钩子中，执行对象的 run 方法开始执行编译

3. 确定入口：从配置中的 entry 找出所有的入口文件

4. 模块解析：从入口文件开始，递归解析文件中所依赖的所有模块。

5. 模块加载：对于每个依赖模块，使用相应的 loader 处理它们

6. 依赖图构建：将所有的模块和它们之间的依赖关系表示为一个依赖图

7. 输出资源生成：根据依赖图和配置，生成一系列输出资源，例如：bundle.js

8. 输出完成：根据配置确定输出的路径和文件名，把生成的输出资源内容写入到文件系统，通常是 dist 文件夹

### webpack 热更新原理

**热更新通过 WebSocket 连接服务器与客户端，Webpack Dev Server （WDS）在服务端运行，负责触发整个热更新流程**

1. 文件监听
   当源代码发生变化时，WDS 会监听这些变化

2. 构建更新
   一旦检测到文件变化，WDS 会重新构建发生变化的模块，会创建一个所谓的 "hot update chunk"（包含更新的模块）

3. 通知客户端
   WDS 通过 websocket 发送消息到客户端，告知有更新模块

4. 下载更新
   客户端接收到最新消息后，使用更简洁的 Fetch API）从服务器下载更新的模块。这些模块通常被打包成一个包含变更的更新块

5. 模块替换
   一旦更新的模块被下载，webpack 的模块热替换（HMR）功能会处理模块的替换操作

### 使用过哪些 plugin

**是插件，可以用来扩展 webpack 功能**
1.html-webpack-plugin:用于自动生成 HTML 文件并自动引入打包之后的资源文件，简化了 webpck 项目中的 HTML 处理流程

2.eslint-webpack-plugin:在 webpack 的构建过程中运行 eslint，检查你的代码是否符合规范

3.mini-css-extract-plugin:将 css 提取到单独的文件中，为每个包含 css 的 js 文件创建一个 css，并且支持 css 按需引入

### 关于 Loader

**loader 本质上是一个函数，因为有些资源 webpack 不认识，需要 loader 进行翻译处理，对其他类型的资源做转译工作，返回转换后的结果，然后 loader 是在 module.rules 中配置，类型是一个数组，然后每一项是一个对象，可以配置对应的 loader 和规则**

使用过哪些 laoder

1.babel-loader；将 es6 转换成 es5

2.css-loader: 处理 css 会对@import 和 url()进行处理

3.style-loader：将 css 插入到 html 中

4.postcc-loader: 将 css 添加到浏览器前缀，确保你的 css 兼容各种浏览器

5.less-loader: 将 less 转成 css

6.url-loader: 将图片转成 base61

7.file-loader: 将图片转成文件

### Babel 原理

**Babel 是一个广泛使用的 js 编译器，主要用于将 es6+代码转换为后兼容的 js 版本**

- babel 核心处理流程，1 源代码解析成 AST 2 转换 AST 为需要的样子 3 生成 AST 为源码

工作原理

1.解析

词法分析：这一阶段将源代码字符串分解为一个个令牌（Tokens）。令牌是代码的最小单位，；例如数字，字符串，标识符，关键字，符号等

语法分析：词法分析之后，Babel 会进行语法分析，将令牌转换成抽象语法树(AST)。AST 是代码的深层结构表示，它将以树的形式展示代码的语法结构。

2.转换

在这一阶段，Babel 接收到 AST 并对其进行遍历，应用各种插件和预设对树进行修改，这些变化可能包括新语言特性的转换，API 的替换等。

3.生成

最后一阶段是代码生成。Babel 将经过转换的 AST 转换回普通的 Javascipt 代码。这个过程包括将 AST 转换成字符串形式的代码，并创建源码映射
