# 优化长列表

1. 使用 Web Worker 处理数据：在 Web Worker 中进行数据计算，避免阻塞主线程

2. 使用虚拟滚动：只渲染可见的列表项，提升渲染性能

vue-virtual-scroll-list

- 计算视口高度
  const viewportHeight = this.$refs.viewport.offsetHeight;

- 监听滚动事件

- 检测滚动到底部

**当滚动条位置加上可视区高度，大于内容总高度，就认为快到底了，需要加载更多内容或做相应处理**

```js
onScroll() {
  const { scrollTop, scrollHeight, clientHeight } = this.$refs.viewport;

// 检测是否滚动到达底部
  if (scrollTop + clientHeight >= scrollHeight - threshold) {
    this.loadMore(); // 调用加载更多数据的函数
  }
}

```

- 加载更多数据

```js
loadMore() {
  // 假设你有一个方法从服务器获取数据
  fetchData().then(newData => {
    this.items.push(...newData); // 将新数据添加到现有项中
  });
}

```
