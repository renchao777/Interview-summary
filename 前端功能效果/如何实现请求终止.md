# 如何实现请求终止

1. 封装 axios 时 每个请求用 AbortController 管理，发起新请求前调用 abort()
可以避免请求叠加、节省网络资源
可结合 防抖 实现搜索框或表单联动频繁请求场景

```js
// utils/request.js
import axios from 'axios';

export function createRequest() {
  let controller = null; // 用于取消请求

  const request = async (config) => {
    // 取消上一次请求
    if (controller) {
      controller.abort();
    }
    controller = new AbortController();

    try {
      const response = await axios({
        ...config,
        signal: controller.signal
      });
      return response.data;
    } catch (err) {
      if (err.name === 'CanceledError' || err.name === 'AbortError') {
        console.log('请求被取消');
      } else {
        throw err;
      }
    }
  };

  const cancel = () => {
    if (controller) controller.abort();
  };

  return { request, cancel };
}
```