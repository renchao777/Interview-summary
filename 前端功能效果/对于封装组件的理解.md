# 对于封装组件的理解

## vue 组件封装的意义

**组件封装的目标提高代码的，复用性，可维护性，以及扩展性**

## Vue 组件的三大特性

1. Props（属性传递）
   可以设置默认值和类型验证，保证组件即用性数据的正确性（类型验证 required 属性进行必要的类型验证）

2. 事件（事件传递）
   子组件通过 $emit 触发自定义事件，与父组件进行通信
   遵循命名规范，避免与内置事件冲突，通常自定义事件的名称可以使用 on- 前缀的事件

3. 插槽（内容分发）

   空插槽：预留空 slot 方便插入自定义内容，例如弹窗组件的内容插槽或布局组件的具名插槽（如 header、footer）
   具名插槽：具名插槽用于多区域内容插入
   作用域插槽：可将组件内部数据传递给插槽内容，增强灵活性

## 组件封装原则

1. 单一职责原则

   组件应只专注于完成一个任务或功能，不要让一个组件承担多种职责。
   复杂的功能可以通过拆分为更小的子组件来实现，从而保持组件的简洁和易维护

2. 高内聚，低耦合

   组件内部的各个部分应紧密相关（高内聚），而组件之间的依赖应尽量减少（低耦合）。
   使用 props 和事件来传递数据和进行交互，避免直接操作其他组件的数据或状态。

3. 避免过度封装
   可以说明过度封装可能导致的代码复杂性和维护难度

4. 样式隔离

   Scoped CSS 和 CSS Modules：实现样式局部隔离，避免样式冲突

   BEM 命名规范：遵循 BEM 规范，减少样式干扰

5. 其他注意事项

   $nextTick：在数据变化后使用 $nextTick 确保 DOM 更新完成再执行操作，解决数据与 DOM 渲染的同步问题

6. 动态创建和实例化组件

   提示组件：可以创建类似 window.alert() 的提示组件

   组件构造器：通过 Vue.extend 创建组件构造函数并动态实例化组件，然后将实例进行$mount() 手动挂载和 $destroy() 清理组件
   调用方式贴近传统 JavaScript 函数风格

7. 性能优化
   使用 keep-alive 缓存组件实例，减少不必要的渲染，并可以异步加载组件以提高初始加载性能

### 封装的大概过程

使用 Vue.extend 方法创建一个组件，然后使用 Vue.component 方法注册组件
