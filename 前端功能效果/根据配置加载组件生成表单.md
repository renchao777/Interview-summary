# vue项目根据配置加载组件生成表单

优点: 通用渲染逻辑只需要实现一次,后续调整表单时只需要修改配置即可,无需改动代码,从而提高了复用性,增加了灵活性

```js
// formConfig.js

<DynamicForm :config="formConfig" />
export const formConfig = [
  { type: 'input', label: '用户名', model: 'username', placeholder: '请输入用户名' },
  { type: 'password', label: '密码', model: 'password', placeholder: '请输入密码' },
  { type: 'select', label: '性别', model: 'gender', options: [
      { label: '男', value: 'male' },
      { label: '女', value: 'female' }
    ] 
  },
  { type: 'checkbox', label: '爱好', model: 'hobbies', options: [
      { label: '篮球', value: 'basketball' },
      { label: '足球', value: 'football' }
    ]
  }
];

```
```html
<template>
  <form @submit.prevent="handleSubmit">
    <div v-for="(field, index) in config" :key="index">
      <label>{{ field.label }}:</label>

      <!-- input -->
      <input v-if="field.type === 'input'" 
             v-model="formData[field.model]" 
             :placeholder="field.placeholder" />

      <!-- password -->
      <input v-else-if="field.type === 'password'" 
             type="password" 
             v-model="formData[field.model]" 
             :placeholder="field.placeholder" />

      <!-- select -->
      <select v-else-if="field.type === 'select'" v-model="formData[field.model]">
        <option v-for="option in field.options" :key="option.value" :value="option.value">
          {{ option.label }}
        </option>
      </select>

      <!-- checkbox -->
      <div v-else-if="field.type === 'checkbox'">
        <label v-for="option in field.options" :key="option.value">
          <input type="checkbox" 
                 :value="option.value" 
                 v-model="formData[field.model]" /> {{ option.label }}
        </label>
      </div>

    </div>

    <button type="submit">提交</button>
  </form>
</template>

<script>
import { formConfig } from './formConfig.js';

export default {
  data() {
    return {
      config: formConfig,
      formData: this.initFormData(formConfig)
    };
  },
  methods: {
    initFormData(config) {
      const data = {};
      config.forEach(field => {
        if (field.type === 'checkbox') data[field.model] = [];
        else data[field.model] = '';
      });
      return data;
    },
    handleSubmit() {
       // 触发自定义事件，把表单数据传给父组件
      this.$emit('submit', this.formData);
    }
  }
};
</script>
```